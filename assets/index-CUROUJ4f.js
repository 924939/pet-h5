import{r as d,b as i,j as R,M as Y,L as s,_ as D,v as _,x as r,F as C,C as N,J as I,N as O,E as T,a as G,G as g,A as L,z as P}from"./index-DcZpNTHM.js";import{B as V}from"./index-BEYOEE9o.js";function $(m,u={}){const t=u.tabbarHeight??60,y=u.cardRatio??.72,n=u.gap??12,h=d(window.innerHeight),e=d(0),l=d(0),v=d(!1);let b=0,w=0;const M=i(()=>h.value-t),f=i(()=>M.value*y),p=i(()=>f.value+n),E=i(()=>(M.value-f.value)/2),S=i(()=>e.value-l.value/p.value),H=()=>{h.value=window.innerHeight};R(()=>{window.addEventListener("resize",H)}),Y(()=>{window.removeEventListener("resize",H)});const B=i(()=>({transform:`translate3d(0, ${E.value-S.value*p.value}px, 0)`,transition:v.value?"none":"transform 0.45s cubic-bezier(0.22,1,0.36,1)"})),k=o=>{const a=o-S.value,c=Math.abs(a),x=Math.max(.88,1-c*.06),A=Math.max(.35,1-c*.28);return{transform:`translateY(${a*18}px) scale(${x})`,opacity:A,zIndex:100-c,transition:v.value?"none":"all 0.45s ease"}},z=o=>{const a=p.value*.7;return o/(1+Math.abs(o)/a)};return{activeIndex:e,trackStyle:B,getItemStyle:k,handleTouchStart:o=>{b=o.touches[0].pageY,w=Date.now(),v.value=!0},handleTouchMove:o=>{const a=o.touches[0].pageY-b,c=s(m)-1;e.value===0&&a>0||e.value===c&&a<0?l.value=z(a):l.value=a},handleTouchEnd:()=>{v.value=!1;const o=Date.now()-w,a=l.value/o,c=p.value/4,x=s(m)-1;(a<-.5||l.value<-c)&&e.value<x?e.value++:(a>.5||l.value>c)&&e.value>0&&e.value--,l.value=0},cardHeight:f,gap:n}}const F={class:"card-content"},j={class:"note-box"},J={class:"image-box"},U=["src"],q={class:"beneficiary-info"},K={__name:"index",setup(m){const u=d([{id:1,title:"公益让我重生",desc:"他在火海中救出了13人...",image:"https://picsum.photos/600/400?1",name:"殷建行",tag:"致敬行善者"},{id:2,title:"陪伴老人",desc:"为留守老人提供陪伴...",image:"https://picsum.photos/600/400?2",name:"张大爷",tag:"数字认证"},{id:3,title:"困境儿童",desc:"我也想拥有童年...",image:"https://picsum.photos/600/400?3",name:"小花",tag:"专业救助"},{id:4,title:"山区教育",desc:"帮助山区孩子读书",image:"https://picsum.photos/600/400?4",name:"小明",tag:"教育援助"}]),t=$(i(()=>u.value.length),{tabbarHeight:60});return(y,n)=>{const h=V;return T(),_("div",{class:"charity-page",onTouchstart:n[0]||(n[0]=(...e)=>s(t).handleTouchStart&&s(t).handleTouchStart(...e)),onTouchmove:n[1]||(n[1]=O((...e)=>s(t).handleTouchMove&&s(t).handleTouchMove(...e),["prevent"])),onTouchend:n[2]||(n[2]=(...e)=>s(t).handleTouchEnd&&s(t).handleTouchEnd(...e))},[r("div",{class:"card-track",style:I(s(t).trackStyle)},[(T(!0),_(C,null,N(u.value,(e,l)=>(T(),_("div",{key:e.id,class:"card-item",style:I([s(t).getItemStyle(l),{height:s(t).cardHeight+"px",marginBottom:s(t).gap+"px"}])},[r("div",F,[r("div",j,[r("h3",null,g(e.title),1),r("p",null,g(e.desc),1)]),r("div",J,[r("img",{src:e.image},null,8,U)]),r("div",q,g(e.name)+" · "+g(e.tag),1),G(h,{round:"",block:"",type:"danger"},{default:L(()=>[...n[3]||(n[3]=[P(" 捐一笔，做好事 ",-1)])]),_:1})])],4))),128))],4)],32)}}},ae=D(K,[["__scopeId","data-v-53906352"]]);export{ae as default};
