import{r as u,b as i,j as I,M as k,_ as z,v as f,x as c,F as A,C as D,J as E,L as s,E as _,a as R,G as g,A as C,z as O}from"./index-BCYFeuLE.js";import{B as Y}from"./index-95FeBtT0.js";function G(p,r={}){const t=r.tabbarHeight??80,T=r.cardRatio??.72,a=r.gap??12,d=u(window.innerHeight),e=u(0),o=u(0),v=u(!1);let x=0,y=0;const b=i(()=>d.value-t),m=i(()=>b.value*T),w=i(()=>m.value+a),H=i(()=>(b.value-m.value)/2),S=()=>{d.value=window.innerHeight};I(()=>{window.addEventListener("resize",S)}),k(()=>{window.removeEventListener("resize",S)});const M=i(()=>({transform:`translateY(${(e.value===0?20:H.value-e.value*w.value)+o.value}px)`,transition:v.value?"none":"transform 0.5s cubic-bezier(0.22,1,0.36,1)"}));return{activeIndex:e,trackStyle:M,getItemStyle:l=>{const n=Math.abs(l-e.value),h=Math.max(.88,1-n*.06),B=Math.max(.35,1-n*.3);return{transform:`scale(${h})`,opacity:B,zIndex:100-n,transition:v.value?"none":"all 0.45s ease"}},handleTouchStart:l=>{x=l.touches[0].pageY,y=Date.now(),v.value=!0},handleTouchMove:l=>{const n=l.touches[0].pageY-x;e.value===0&&n>0||e.value===p.value-1&&n<0?o.value=n*.35:o.value=n},handleTouchEnd:()=>{v.value=!1;const l=Date.now()-y,n=o.value/l,h=w.value/4;(n<-.5||o.value<-h)&&e.value<p.value-1?e.value++:(n>.5||o.value>h)&&e.value>0&&e.value--,o.value=0},cardHeight:m,gap:a}}const L={class:"card-content"},N={class:"note-box"},V={class:"image-box"},F=["src"],P={class:"beneficiary-info"},$={__name:"index",setup(p){const r=u([{id:1,title:"公益让我重生",desc:"他在火海中救出了13人...",image:"https://picsum.photos/600/400?1",name:"殷建行",tag:"致敬行善者"},{id:2,title:"陪伴老人",desc:"为留守老人提供陪伴...",image:"https://picsum.photos/600/400?2",name:"张大爷",tag:"数字认证"},{id:3,title:"困境儿童",desc:"我也想拥有童年...",image:"https://picsum.photos/600/400?3",name:"小花",tag:"专业救助"}]),t=G(i(()=>r.value.length));return(T,a)=>{const d=Y;return _(),f("div",{class:"charity-page",onTouchstart:a[0]||(a[0]=(...e)=>s(t).handleTouchStart&&s(t).handleTouchStart(...e)),onTouchmove:a[1]||(a[1]=(...e)=>s(t).handleTouchMove&&s(t).handleTouchMove(...e)),onTouchend:a[2]||(a[2]=(...e)=>s(t).handleTouchEnd&&s(t).handleTouchEnd(...e))},[c("div",{class:"card-track",style:E(s(t).trackStyle)},[(_(!0),f(A,null,D(r.value,(e,o)=>(_(),f("div",{key:e.id,class:"card-item",style:E([s(t).getItemStyle(o),{height:s(t).cardHeight+"px",marginBottom:s(t).gap+"px"}])},[c("div",L,[c("div",N,[c("h3",null,g(e.title),1),c("p",null,g(e.desc),1)]),c("div",V,[c("img",{src:e.image},null,8,F)]),c("div",P,g(e.name)+" · "+g(e.tag),1),R(d,{round:"",block:"",type:"danger"},{default:C(()=>[...a[3]||(a[3]=[O(" 捐一笔，做好事 ",-1)])]),_:1})])],4))),128))],4)],32)}}},W=z($,[["__scopeId","data-v-236b59c6"]]);export{W as default};
